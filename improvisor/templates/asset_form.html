{% extends "with_sidebar.html" %}

{% set page_title = 'Asset' %}

{% block page_content %}
    <h2 class="darkText">
        <a href="/assets">
            <i class="fas fa-arrow-left darkText"></i>
        </a>
        Add Assets
    </h2>
    {% from "includes/_formhelpers.html" import render_field %}
    <div class="assetFormsContainer" id="assetFormsContainer">
        <form method='POST' action="" enctype="multipart/form-data" class="whiteContainer" id="form1">
            <div class="inputSection">
                <div class="labelDiv">Asset Name:</div>
                {{render_field(form.assetname, autocomplete="assetname", placeholder="Example Name", class="bubbleButton growText", minlength="2", maxlength="50", required="true", id="assetName")}}
            </div>
            <br />
            <div class="inputSection">
                <div class="labelDiv">Asset Tags:</div>
                {{render_field(form.tagname, autocomplete="tags", placeholder="tag1, tag2, tag3...", class="bubbleButton growText", minlength="2", maxlength="100", required="true")}}
            </div>
            {{render_field(form.assettype)}}
            <div id="fileUploadFields1">
                <div class="fileInputDiv">
                    {{form.assetResource(class="fileInputHidden", id="fileUploadHidden1", required="true")}}
                    <div id="fileUploadVisible1">
                        <div class="fileInputVisible bubbleButton bubbleButtonDark">
                            Upload File
                        </div>
                        <div class="fileNameLabelVisible">
                            No file chosen
                        </div>
                    </div>
                </div>
            </div>
            <div id="linkUploadFields1" class="inputSection">
                {{render_field(form.assetLink, placeholder="www.example.com/url", class="bubbleButton growText", minlength="2", maxlength="50")}}
            </div>

            <br />
            <div class="">
                <div class="labelDiv">Thumbnail upload - will be replaced</div>
                <!-- <div class="fileInputDiv"> -->
                    {{form.assetThumbnail(id="thumbUploadHidden1")}}
                    <!-- <div class="fileInputVisible bubbleButton bubbleButtonDark" id="thumbUploadVisible1">
                        Upload File
                    </div> -->
                <!-- </div> -->
            </div>

            <!-- hidden input for sending thumbnail's base64 to server -->
            <input type="submit" class="hiddenSubmit">
            {{form.assetAutomaticThumbnail(id="thumbHidden")}}
            <br />
            <input type="checkbox" id="thumbnailNameCheckbox"> Use name as thumbnail <br>
            {{ form.hidden_tag() }}
        </form>

        <!-- buttons for selecting page of pdf -->
        <div class="buttonMiddle">
          <button class="bubbleButton bubbleButtonDark hidden" id="prevButton">Previous</button>
          <button class="bubbleButton bubbleButtonDark ml-2 hidden" id="nextButton">Next</button>
        </div>
        <div id="thumbnailSpace">
          <!-- container for thumbnail -->
        </div>
    </div>
    <div class="formFooter">
        <div class="bubbleButton bubbleButtonDark rowsButton" id="addAssetBtn">
            <i class="fas fa-plus"></i>
            Add asset
        </div>
        <button type="submit" id="submitButton" class="bubbleButton bubbleButtonDark rowsButton">Submit</button>
    </div>


    <br />
    <div class="flashes">
        {% include 'includes/_messages.html' %}
    </div>

{% endblock page_content %}

{% block end_body %}
    <script>
        document.getElementById('assetPoolOption').classList.add('selected');
    </script>
    <script type="text/javascript" src="{{url_for('static', filename='JS/new_asset_form.js')}}"></script>

{% endblock end_body %}
